define(["exports","./Matrix2-ccd5b911","./RuntimeError-346a3079","./when-4bbc8319","./WebGLConstants-1c8239cc","./Transforms-2f9313e7"],function(t,x,e,n,a,d){"use strict";var r=Object.freeze({NONE:0,TRIANGLES:1,LINES:2,POLYLINES:3}),i={POINTS:a.WebGLConstants.POINTS,LINES:a.WebGLConstants.LINES,LINE_LOOP:a.WebGLConstants.LINE_LOOP,LINE_STRIP:a.WebGLConstants.LINE_STRIP,TRIANGLES:a.WebGLConstants.TRIANGLES,TRIANGLE_STRIP:a.WebGLConstants.TRIANGLE_STRIP,TRIANGLE_FAN:a.WebGLConstants.TRIANGLE_FAN,validate:function(t){return t===i.POINTS||t===i.LINES||t===i.LINE_LOOP||t===i.LINE_STRIP||t===i.TRIANGLES||t===i.TRIANGLE_STRIP||t===i.TRIANGLE_FAN}},o=Object.freeze(i);function s(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this.attributes=t.attributes,this.indices=t.indices,this.primitiveType=n.defaultValue(t.primitiveType,o.TRIANGLES),this.boundingSphere=t.boundingSphere,this.geometryType=n.defaultValue(t.geometryType,r.NONE),this.boundingSphereCV=t.boundingSphereCV,this.offsetAttribute=t.offsetAttribute}s.computeNumberOfVertices=function(t){var e,a,r=-1;for(e in t.attributes)t.attributes.hasOwnProperty(e)&&n.defined(t.attributes[e])&&n.defined(t.attributes[e].values)&&(r=(a=t.attributes[e]).values.length/a.componentsPerAttribute);return r};var A=new x.Cartographic,P=new x.Cartesian3,S=new x.Matrix4,G=[new x.Cartographic,new x.Cartographic,new x.Cartographic],w=[new x.Cartesian2,new x.Cartesian2,new x.Cartesian2],R=[new x.Cartesian2,new x.Cartesian2,new x.Cartesian2],O=new x.Cartesian3,_=new d.Quaternion,g=new x.Matrix4,V=new x.Matrix2;s._textureCoordinateRotationPoints=function(t,e,a,r){for(var n=x.Rectangle.center(r,A),n=x.Cartographic.toCartesian(n,a,P),n=d.Transforms.eastNorthUpToFixedFrame(n,a,S),i=x.Matrix4.inverse(n,S),o=w,s=G,u=(s[0].longitude=r.west,s[0].latitude=r.south,s[1].longitude=r.west,s[1].latitude=r.north,s[2].longitude=r.east,s[2].latitude=r.south,O),I=0;I<3;I++)x.Cartographic.toCartesian(s[I],a,u),u=x.Matrix4.multiplyByPointAsVector(i,u,u),o[I].x=u.x,o[I].y=u.y;var n=d.Quaternion.fromAxisAngle(x.Cartesian3.UNIT_Z,-e,_),N=x.Matrix3.fromQuaternion(n,g),T=t.length,c=Number.POSITIVE_INFINITY,l=Number.POSITIVE_INFINITY,m=Number.NEGATIVE_INFINITY,p=Number.NEGATIVE_INFINITY;for(I=0;I<T;I++)u=x.Matrix4.multiplyByPointAsVector(i,t[I],u),u=x.Matrix3.multiplyByVector(N,u,u),c=Math.min(c,u.x),l=Math.min(l,u.y),m=Math.max(m,u.x),p=Math.max(p,u.y);var b=x.Matrix2.fromRotation(e,V),y=R,E=(y[0].x=c,y[0].y=l,y[1].x=c,y[1].y=p,y[2].x=m,y[2].y=l,o[0]),L=o[2].x-E.x,f=o[1].y-E.y;for(I=0;I<3;I++){var h=y[I];x.Matrix2.multiplyByVector(b,h,h),h.x=(h.x-E.x)/L,h.y=(h.y-E.y)/f}var r=y[0],n=y[1],e=y[2],C=new Array(6);return x.Cartesian2.pack(r,C),x.Cartesian2.pack(n,C,2),x.Cartesian2.pack(e,C,4),C},t.Geometry=s,t.GeometryAttribute=function(t){t=n.defaultValue(t,n.defaultValue.EMPTY_OBJECT),this.componentDatatype=t.componentDatatype,this.componentsPerAttribute=t.componentsPerAttribute,this.normalize=n.defaultValue(t.normalize,!1),this.values=t.values},t.GeometryType=r,t.PrimitiveType=o});
